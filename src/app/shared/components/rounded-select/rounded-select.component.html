<button class="button-toggle-select" [disabled]="disabled" (click)="toggleSelect(custom_select)">
  <span>{{ textValue }}</span>
  <mat-icon>expand_more</mat-icon>
</button>

<mat-form-field>
  <mat-label>{{ textValue }}</mat-label>
  <mat-select [formControl]="_formControl!" disableOptionCentering #custom_select>
      <mat-option *ngIf="searchInput">
        <ngx-mat-select-search
          [formControl]="search"
          placeholderLabel="{{ placeholder }}"
          [searching]="loading"
          noEntriesFoundLabel="No se encontraron resultados">
        </ngx-mat-select-search>
      </mat-option>

      <mat-option *ngIf="!!_formControl!.value && resetButton" [value]="null">Borrar</mat-option>
      <mat-divider *ngIf="!!_formControl!.value && resetButton"></mat-divider>

      <ng-container *ngIf="!hasGroups">
        <mat-option [value]="option" *ngFor="let option of filteredOptions">
          {{ option.text}}
        </mat-option>
      </ng-container>

      <ng-container *ngIf="hasGroups">
        <mat-optgroup *ngFor="let group of filteredOptions" [label]="group.text">
          <!-- Workaround: https://angular.io/guide/template-typecheck#disabling-type-checking-using-any -->
          <mat-option *ngFor="let option of $any(group).options" [value]="option">
            {{ option.text }}
          </mat-option>
        </mat-optgroup>
      </ng-container>
  </mat-select>
</mat-form-field>