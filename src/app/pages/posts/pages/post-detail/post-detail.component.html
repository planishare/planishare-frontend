<main class="container flex-col lg-flex-row gap-05 bg-background p-y-1">
  <div *ngIf="post" class="card flex-col gap-05" style="max-width: 350px;">
    <div class="flex-between-center">
      <p class="ft-label">{{ post.user.fullName ?? post.user.email }} - {{ post.createdAt|timeAgo }}</p>

      <button class="small-icon-button" mat-icon-button [matMenuTriggerFor]="menu" aria-label="Opciones">
        <i-tabler name="dots-vertical"></i-tabler>
      </button>
      <mat-menu #menu="matMenu">
        <!-- <button mat-menu-item (click)="reportPost(post)" *ngIf="!ownPost"> -->
        <button mat-menu-item>
          <i-tabler name="message-report"></i-tabler>
          <span>Reportar</span>
        </button>
        <!-- <a mat-menu-item [routerLink]="['/posts/edit', post.id]" *ngIf="ownPost"> -->
        <a mat-menu-item [routerLink]="['/posts/edit', post.id]">
          <i-tabler name="pencil"></i-tabler>
          <span>Editar</span>
        </a>
        <!-- <button mat-menu-item (click)="deletePost(post)" *ngIf="ownPost"> -->
        <button mat-menu-item>
          <i-tabler name="trash"></i-tabler>
          <span>Eliminar</span>
        </button>
      </mat-menu>
    </div>

    <h2><a class="a-style-none ft-title">{{ post.title }}</a></h2>
    <p><a class="a-style-none ft-body">{{ post.description }}</a></p>

    <div class="ft-body flex-start-center gap-05">
      <i-tabler name="file-description" class="small-icon"></i-tabler>
      <span class="ft-label">{{ post.totalFiles }} Documentos</span>
    </div>
    <div class="flex-col gap-05 ft-body">
      <div class="flex-center-center gap-05">
        <div class="rounded-tag--slime w-100 bg-{{post.mainFile.accentColor}}
          txt-on-{{post.mainFile.accentColor}} min-w-0">
            <span class="text-ellipsis">{{ post.mainFile.fullName }}</span>
        </div>
        <button mat-icon-button><i-tabler name="download"></i-tabler></button>
        <button matRipple class="rounded-button txt-blue">Ver</button>
      </div>

      <ng-container *ngFor="let file of post.supportingMaterial">
        <!-- TODO -->
      </ng-container>
    </div>

    <div class="ft-label flex-center-center flex-wrap gap-05">
      <span class="rounded-tag--slime bg-academic-level txt-on-academic-level flex-grow-1">{{ post.academicLevel.name }}</span>
      <span class="rounded-tag--slime bg-axis txt-on-axis flex-grow-1">{{ post.axis.name }}</span>
      <span class="rounded-tag--slime bg-subject txt-on-subject flex-grow-1">{{ post.axis.subject.name }}</span>
    </div>

    <div class="ft-label flex-between-center f-weight-500">
      <div class="flex-wrap gap-05">
        <div class="flex-center-center gap-025">
          <i-tabler name="heart" class="small-icon"></i-tabler>
          <span>{{ post.totalLikes }} Me gusta</span>
        </div>
        <div class="flex-center-center gap-025">
          <i-tabler name="eye" class="small-icon"></i-tabler>
          <span>{{ post.totalViews }} Visualizaciones</span>
        </div>
      </div>
  
      <button mat-icon-button aria-label="Dar me gusta">
        <i-tabler [name]="post.alreadyLiked ? 'heart-filled' : 'heart'"></i-tabler>
      </button>
    </div>
  </div>

</main>